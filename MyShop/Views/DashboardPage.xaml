<Page
    x:Class="MyShop.Views.DashboardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyShop.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="#F5F5F5">

    <Page.Resources>
        <local:StatusColorConverter x:Key="StatusColorConverter"/>
        <local:QuantitySoldConverter x:Key="QuantitySoldConverter"/>
        <local:StockConverter x:Key="StockConverter"/>
        <local:OrderIdConverter x:Key="OrderIdConverter"/>
        <local:DateTimeConverter x:Key="DateTimeConverter"/>
        <local:CurrencyConverter x:Key="CurrencyConverter"/>
    </Page.Resources>

    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="30">
            <StackPanel Spacing="25">

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock x:Name="WelcomeText" Text="Welcome Back!" FontSize="28" FontWeight="Bold" Foreground="#1A1A2E"/>
                        <TextBlock x:Name="DateText" FontSize="14" Foreground="#888888" Margin="0,5,0,0"/>
                    </StackPanel>

                    <Button Grid.Column="1" Content="ðŸ”„ Refresh" Click="RefreshButton_Click" 
                            Background="#7B5CD6" Foreground="White" Padding="20,12" CornerRadius="8"
                            FontWeight="SemiBold"/>
                </Grid>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column="0" Background="White" CornerRadius="16" Padding="20" Margin="0,0,10,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Tá»•ng sáº£n pháº©m" FontSize="13" Foreground="#888888"/>
                                <TextBlock x:Name="TotalProductsText" Text="0" FontSize="32" FontWeight="Bold" Foreground="#1A1A2E" Margin="0,8,0,0"/>
                                <TextBlock Text="sáº£n pháº©m" FontSize="11" Foreground="#AAAAAA"/>
                            </StackPanel>
                            <Border Grid.Column="1" Background="#E3F2FD" Width="55" Height="55" CornerRadius="27" VerticalAlignment="Center">
                                <TextBlock Text="ðŸ“¦" FontSize="26" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Grid>
                    </Border>

                    <Border Grid.Column="1" Background="White" CornerRadius="16" Padding="20" Margin="5,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="ÄÆ¡n hÃ ng hÃ´m nay" FontSize="13" Foreground="#888888"/>
                                <TextBlock x:Name="TodayOrdersText" Text="0" FontSize="32" FontWeight="Bold" Foreground="#1A1A2E" Margin="0,8,0,0"/>
                                <TextBlock Text="Ä‘Æ¡n hÃ ng" FontSize="11" Foreground="#AAAAAA"/>
                            </StackPanel>
                            <Border Grid.Column="1" Background="#FFF3E0" Width="55" Height="55" CornerRadius="27" VerticalAlignment="Center">
                                <TextBlock Text="ðŸ›’" FontSize="26" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Grid>
                    </Border>

                    <Border Grid.Column="2" Background="White" CornerRadius="16" Padding="20" Margin="5,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Doanh thu hÃ´m nay" FontSize="13" Foreground="#888888"/>
                                <TextBlock x:Name="TodayRevenueText" Text="0 Ä‘" FontSize="32" FontWeight="Bold" Foreground="#4CAF50" Margin="0,8,0,0"/>
                                <TextBlock Text="VNÄ" FontSize="11" Foreground="#AAAAAA"/>
                            </StackPanel>
                            <Border Grid.Column="1" Background="#E8F5E9" Width="55" Height="55" CornerRadius="27" VerticalAlignment="Center">
                                <TextBlock Text="ðŸ’°" FontSize="26" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Grid>
                    </Border>

                    <Border Grid.Column="3" Background="White" CornerRadius="16" Padding="20" Margin="10,0,0,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Sáº¯p háº¿t hÃ ng" FontSize="13" Foreground="#888888"/>
                                <TextBlock x:Name="LowStockCountText" Text="0" FontSize="32" FontWeight="Bold" Foreground="#E53935" Margin="0,8,0,0"/>
                                <TextBlock Text="sáº£n pháº©m" FontSize="11" Foreground="#AAAAAA"/>
                            </StackPanel>
                            <Border Grid.Column="1" Background="#FFEBEE" Width="55" Height="55" CornerRadius="27" VerticalAlignment="Center">
                                <TextBlock Text="âš ï¸" FontSize="26" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </Grid>
                    </Border>
                </Grid>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column="0" Background="White" CornerRadius="16" Padding="25" Margin="0,0,10,0">
                        <StackPanel>
                            <Grid Margin="0,0,0,20">
                                <TextBlock Text="ðŸ“ˆ Doanh thu trong thÃ¡ng" FontSize="18" FontWeight="Bold" Foreground="#1A1A2E"/>
                                <TextBlock x:Name="MonthYearText" HorizontalAlignment="Right" FontSize="13" Foreground="#888888" VerticalAlignment="Center"/>
                            </Grid>
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" Height="220">
                                <Canvas x:Name="RevenueChart" Width="700" Height="200"/>
                            </ScrollViewer>
                        </StackPanel>
                    </Border>

                    <Border Grid.Column="1" Background="White" CornerRadius="16" Padding="25" Margin="10,0,0,0">
                        <StackPanel>
                            <TextBlock Text="ðŸ† Top 5 bÃ¡n cháº¡y" FontSize="18" FontWeight="Bold" Foreground="#1A1A2E" Margin="0,0,0,15"/>
                            <ListView x:Name="TopProductsList" SelectionMode="None" ItemContainerStyle="{StaticResource ListViewItemStyle}">
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="0,8" Padding="10">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Border Grid.Column="0" Background="#F0E6FF" Width="40" Height="40" CornerRadius="8" Margin="0,0,12,0">
                                                <TextBlock Text="ðŸ“¦" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <TextBlock Text="{Binding ProductName}" FontWeight="SemiBold" FontSize="13" TextTrimming="CharacterEllipsis"/>
                                                <TextBlock Text="{Binding TotalQuantity, Converter={StaticResource QuantitySoldConverter}}" FontSize="11" Foreground="#888888"/>
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </StackPanel>
                    </Border>
                </Grid>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column="0" Background="White" CornerRadius="16" Padding="25" Margin="0,0,10,0">
                        <StackPanel>
                            <TextBlock Text="âš ï¸ Sáº¯p háº¿t hÃ ng" FontSize="18" FontWeight="Bold" Foreground="#1A1A2E" Margin="0,0,0,15"/>
                            <ListView x:Name="LowStockList" SelectionMode="None" ItemContainerStyle="{StaticResource ListViewItemStyle}">
                                <ListView.ItemTemplate>
                                    <DataTemplate x:DataType="local:LowStockItem">
                                        <Grid Margin="0,8" Padding="10">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Border Grid.Column="0" Background="#FFEBEE" Width="40" Height="40" CornerRadius="8" Margin="0,0,12,0">
                                                <TextBlock Text="ðŸ“¦" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <TextBlock Text="{x:Bind Name}" FontWeight="SemiBold" FontSize="13" TextTrimming="CharacterEllipsis" Foreground="#1A1A2E"/>
                                            </StackPanel>
                                            <Border Grid.Column="2" Background="#FFEBEE" Padding="12,6" CornerRadius="6" VerticalAlignment="Center">
                                                <TextBlock Text="{x:Bind Stock, Converter={StaticResource StockConverter}}" FontWeight="Bold" Foreground="#E53935" FontSize="12"/>
                                            </Border>
                                        </Grid>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </StackPanel>
                    </Border>

                    <Border Grid.Column="1" Background="White" CornerRadius="16" Padding="25" Margin="10,0,0,0">
                        <StackPanel>
                            <TextBlock Text="ðŸ• ÄÆ¡n hÃ ng gáº§n Ä‘Ã¢y" FontSize="18" FontWeight="Bold" Foreground="#1A1A2E" Margin="0,0,0,15"/>
                            <ListView x:Name="RecentOrdersList" SelectionMode="None" ItemContainerStyle="{StaticResource ListViewItemStyle}">
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="0,8" Padding="10">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Border Grid.Column="0" Background="#F0F0F0" Width="40" Height="40" CornerRadius="20" Margin="0,0,12,0">
                                                <TextBlock Text="ðŸ§¾" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <TextBlock Text="{Binding OrderId, Converter={StaticResource OrderIdConverter}}" FontWeight="SemiBold" FontSize="13"/>
                                                <TextBlock Text="{Binding CreatedTime, Converter={StaticResource DateTimeConverter}}" FontSize="11" Foreground="#888888"/>
                                            </StackPanel>
                                            <StackPanel Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right">
                                                <TextBlock Text="{Binding FinalPrice, Converter={StaticResource CurrencyConverter}}" FontWeight="Bold" Foreground="#1A1A2E" FontSize="14" HorizontalAlignment="Right"/>
                                                <Border Background="{Binding Status, Converter={StaticResource StatusColorConverter}}" 
                                                        Padding="10,4" CornerRadius="4" Margin="0,5,0,0">
                                                    <TextBlock Text="{Binding Status}" FontSize="10" FontWeight="SemiBold" Foreground="White"/>
                                                </Border>
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </StackPanel>
                    </Border>
                </Grid>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>